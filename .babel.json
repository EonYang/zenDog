{
  "{\"filename\":\"/app/server3000.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./api",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "apiRouter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/server3000.js",
      "filenameRelative": "/app/server3000.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "server3000.js",
      "sourceFileName": "server3000.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "server3000"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _api = require('./api');\n\nvar _api2 = _interopRequireDefault(_api);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// create variable to hold all users and users' status.\n// format : dogs[id] = {name: xxx, time: yyy}\nvar dogs = {};\n\nvar port = process.env.PORT || 3000;\nvar express = require('express');\nvar app = express();\nvar server = require('http').createServer(app).listen(port, function () {\n  console.log('server is listening at port: ' + port);\n});\n\nvar mongojs = require('mongojs');\nvar config = require('./config.js');\nvar db = mongojs(config.username + ':' + config.passsword + \"@ds043350.mlab.com:43350/testdata01\");\n\napp.set('view engine', 'ejs');\napp.use(express.static('public'));\napp.use('/api', _api2.default);\n\napp.get('/', function (req, res) {\n  res.render('index.ejs');\n});\n\nvar io = require('socket.io').listen(server);\n\nvar outputs = io.of('/');\n\noutputs.on('connection', function (socket) {\n  console.log('new output client connected: ' + socket.id);\n\n  socket.on('askingData', function () {\n    outputs.emit('initialData', dogs);\n    console.log('just gave all dogs to a new output client');\n  });\n\n  socket.on('disconnect', function () {\n    console.log('output client is gone: ' + socket.id);\n  });\n});\n\nvar inputs = io.of('/input');\n\n//what do inputs do\ninputs.on('connection', function (socket) {\n  console.log('new input client connected: ' + socket.id);\n\n  //when we have userName, store it as a user.\n  //****could be done with input form and route,\n  //update: see the bottom of file to see my attemption\n  socket.on('newUser', function (myName) {\n    dogs[socket.id] = {\n      name: myName,\n      timeStart: new Date().getTime()\n      // create new variable to hold new dog, so we can only sent new dog to others.\n    };var newDog = {\n      id: socket.id,\n      name: dogs[socket.id].name,\n      timeStart: dogs[socket.id].timeStart\n      //send new dog message to all clients\n    };outputs.emit('newDog', newDog);\n    console.log('giving the new dog to all outputs, line 58');\n  });\n\n  //when we got a new userStartTime(means a user moved his phone),\n  //store it to the corresponding userID\n  socket.on('zenInterupted', function () {\n    //if user does't have a name, skip this.\n    if (dogs[socket.id] != null && dogs[socket.id].name != null) {\n      // refresh dogs, and emit new data to all\n      dogs[socket.id].timeStart = new Date().getTime();\n      var failedDogId = socket.id;\n      // tell outpus who just faild, for animation purpose.\n      outputs.emit('dogFail', failedDogId);\n      console.log('User' + dogs[socket.id].name + 'just failed');\n    }\n  });\n\n  // when user leave\n  socket.on('disconnect', function () {\n    //if user does't have a name, skip this.\n    if (dogs[socket.id] != null && dogs[socket.id].name != null) {\n      var goneDogId = socket.id;\n      var dogName = dogs[socket.id].name;\n      //delete this dog\n      delete dogs[socket.id];\n      //tell outputs who just left\n      outputs.emit('dogLeft', goneDogId);\n      console.log('this guy has left:' + dogName);\n    } else {\n      console.log('this guy has left:' + socket.id);\n    }\n  });\n});\n\n//compare\nvar StoreDogsToDB = function StoreDogsToDB() {\n  var _loop = function _loop() {\n    console.log(dogs[dog]);\n    var now = new Date().getTime();\n    var newDuration = now - dogs[dog].timeStart;\n    // find the same dog in database\n    db.top10.find({\n      name: dogs[dog].name\n    }, function (err, data) {\n      if (data.length === 0) {\n        console.log('dog didn\\'t find, maybe new dog');\n        // store new dogs\n        var newtop = {\n          name: dogs[dog].name,\n          duration: newDuration\n        };\n        StoreNewTopDog(newtop);\n      } else {\n        if (newDuration > data[0].duration) {\n          console.log('find this dog, and worth updating');\n          updateDuration(dogs[dog].name, newDuration);\n        } else {\n          console.log('not longer than last time, abandoned');\n        }\n      }\n    });\n  };\n\n  for (var dog in dogs) {\n    _loop();\n  }\n};\n\nvar updateDuration = function updateDuration(name, newDuration) {\n  db.top10.update({\n    name: name\n  }, {\n    $set: {\n      duration: newDuration\n    }\n  }, function () {\n    return console.log(name + '\\'s new duration is ' + newDuration);\n  });\n};\n\nvar StoreNewTopDog = function StoreNewTopDog(obj) {\n  db.top10.save(obj, function (err, saved) {\n    var log = err || !saved ? 'date didn\\'t save' : obj + 'saved to top10';\n    console.log(log);\n  });\n};\n\nvar storeDogsEvery10Seconds = setInterval(StoreDogsToDB, 5000);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlcjMwMDAuanMiXSwibmFtZXMiOlsiZG9ncyIsInBvcnQiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImV4cHJlc3MiLCJyZXF1aXJlIiwiYXBwIiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsIm1vbmdvanMiLCJjb25maWciLCJkYiIsInVzZXJuYW1lIiwicGFzc3N3b3JkIiwic2V0IiwidXNlIiwic3RhdGljIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwiaW8iLCJvdXRwdXRzIiwib2YiLCJvbiIsInNvY2tldCIsImlkIiwiZW1pdCIsImlucHV0cyIsIm15TmFtZSIsIm5hbWUiLCJ0aW1lU3RhcnQiLCJEYXRlIiwiZ2V0VGltZSIsIm5ld0RvZyIsImZhaWxlZERvZ0lkIiwiZ29uZURvZ0lkIiwiZG9nTmFtZSIsIlN0b3JlRG9nc1RvREIiLCJkb2ciLCJub3ciLCJuZXdEdXJhdGlvbiIsInRvcDEwIiwiZmluZCIsImVyciIsImRhdGEiLCJsZW5ndGgiLCJuZXd0b3AiLCJkdXJhdGlvbiIsIlN0b3JlTmV3VG9wRG9nIiwidXBkYXRlRHVyYXRpb24iLCJ1cGRhdGUiLCIkc2V0Iiwib2JqIiwic2F2ZSIsInNhdmVkIiwic3RvcmVEb2dzRXZlcnkxMFNlY29uZHMiLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBRUE7QUFDQTtBQUNBLElBQUlBLE9BQU8sRUFBWDs7QUFFQSxJQUFNQyxPQUFPQyxRQUFRQyxHQUFSLENBQVlDLElBQVosSUFBb0IsSUFBakM7QUFDQSxJQUFNQyxVQUFVQyxRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNQyxNQUFNRixTQUFaO0FBQ0EsSUFBSUcsU0FBU0YsUUFBUSxNQUFSLEVBQWdCRyxZQUFoQixDQUE2QkYsR0FBN0IsRUFBa0NHLE1BQWxDLENBQXlDVCxJQUF6QyxFQUErQyxZQUFNO0FBQ2hFVSxVQUFRQyxHQUFSLENBQVksa0NBQWtDWCxJQUE5QztBQUNELENBRlksQ0FBYjs7QUFJQSxJQUFJWSxVQUFVUCxRQUFRLFNBQVIsQ0FBZDtBQUNBLElBQUlRLFNBQVNSLFFBQVEsYUFBUixDQUFiO0FBQ0EsSUFBSVMsS0FBS0YsUUFBUUMsT0FBT0UsUUFBUCxHQUFrQixHQUFsQixHQUF3QkYsT0FBT0csU0FBL0IsR0FBMkMscUNBQW5ELENBQVQ7O0FBRUFWLElBQUlXLEdBQUosQ0FBUSxhQUFSLEVBQXVCLEtBQXZCO0FBQ0FYLElBQUlZLEdBQUosQ0FBUWQsUUFBUWUsTUFBUixDQUFlLFFBQWYsQ0FBUjtBQUNBYixJQUFJWSxHQUFKLENBQVEsTUFBUjs7QUFFQVosSUFBSWMsR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUN6QkEsTUFBSUMsTUFBSixDQUFXLFdBQVg7QUFDRCxDQUZEOztBQUlBLElBQUlDLEtBQUtuQixRQUFRLFdBQVIsRUFBcUJJLE1BQXJCLENBQTRCRixNQUE1QixDQUFUOztBQUVBLElBQUlrQixVQUFVRCxHQUFHRSxFQUFILENBQU0sR0FBTixDQUFkOztBQUVBRCxRQUFRRSxFQUFSLENBQVcsWUFBWCxFQUF5QixVQUFDQyxNQUFELEVBQVk7QUFDbkNsQixVQUFRQyxHQUFSLENBQVksa0NBQWtDaUIsT0FBT0MsRUFBckQ7O0FBRUFELFNBQU9ELEVBQVAsQ0FBVSxZQUFWLEVBQXdCLFlBQU07QUFDNUJGLFlBQVFLLElBQVIsQ0FBYSxhQUFiLEVBQTRCL0IsSUFBNUI7QUFDQVcsWUFBUUMsR0FBUixDQUFZLDJDQUFaO0FBQ0QsR0FIRDs7QUFLQWlCLFNBQU9ELEVBQVAsQ0FBVSxZQUFWLEVBQXdCLFlBQU07QUFDNUJqQixZQUFRQyxHQUFSLENBQVksNEJBQTRCaUIsT0FBT0MsRUFBL0M7QUFDRCxHQUZEO0FBR0QsQ0FYRDs7QUFhQSxJQUFJRSxTQUFTUCxHQUFHRSxFQUFILENBQU0sUUFBTixDQUFiOztBQUVBO0FBQ0FLLE9BQU9KLEVBQVAsQ0FBVSxZQUFWLEVBQXdCLFVBQUNDLE1BQUQsRUFBWTtBQUNsQ2xCLFVBQVFDLEdBQVIsQ0FBWSxpQ0FBaUNpQixPQUFPQyxFQUFwRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQUQsU0FBT0QsRUFBUCxDQUFVLFNBQVYsRUFBcUIsVUFBQ0ssTUFBRCxFQUFZO0FBQy9CakMsU0FBSzZCLE9BQU9DLEVBQVosSUFBa0I7QUFDaEJJLFlBQU1ELE1BRFU7QUFFaEJFLGlCQUFXLElBQUlDLElBQUosR0FBV0MsT0FBWDtBQUViO0FBSmtCLEtBQWxCLENBS0EsSUFBSUMsU0FBUztBQUNYUixVQUFJRCxPQUFPQyxFQURBO0FBRVhJLFlBQU1sQyxLQUFLNkIsT0FBT0MsRUFBWixFQUFnQkksSUFGWDtBQUdYQyxpQkFBV25DLEtBQUs2QixPQUFPQyxFQUFaLEVBQWdCSztBQUU3QjtBQUxhLEtBQWIsQ0FNQVQsUUFBUUssSUFBUixDQUFhLFFBQWIsRUFBdUJPLE1BQXZCO0FBQ0EzQixZQUFRQyxHQUFSLENBQVksNENBQVo7QUFDRCxHQWREOztBQWdCQTtBQUNBO0FBQ0FpQixTQUFPRCxFQUFQLENBQVUsZUFBVixFQUEyQixZQUFNO0FBQy9CO0FBQ0EsUUFBSTVCLEtBQUs2QixPQUFPQyxFQUFaLEtBQW1CLElBQW5CLElBQTJCOUIsS0FBSzZCLE9BQU9DLEVBQVosRUFBZ0JJLElBQWhCLElBQXdCLElBQXZELEVBQTZEO0FBQzNEO0FBQ0FsQyxXQUFLNkIsT0FBT0MsRUFBWixFQUFnQkssU0FBaEIsR0FBNEIsSUFBSUMsSUFBSixHQUFXQyxPQUFYLEVBQTVCO0FBQ0EsVUFBSUUsY0FBY1YsT0FBT0MsRUFBekI7QUFDQTtBQUNBSixjQUFRSyxJQUFSLENBQWEsU0FBYixFQUF3QlEsV0FBeEI7QUFDQTVCLGNBQVFDLEdBQVIsQ0FBWSxTQUFTWixLQUFLNkIsT0FBT0MsRUFBWixFQUFnQkksSUFBekIsR0FBZ0MsYUFBNUM7QUFDRDtBQUNGLEdBVkQ7O0FBWUE7QUFDQUwsU0FBT0QsRUFBUCxDQUFVLFlBQVYsRUFBd0IsWUFBTTtBQUM1QjtBQUNBLFFBQUk1QixLQUFLNkIsT0FBT0MsRUFBWixLQUFtQixJQUFuQixJQUEyQjlCLEtBQUs2QixPQUFPQyxFQUFaLEVBQWdCSSxJQUFoQixJQUF3QixJQUF2RCxFQUE2RDtBQUMzRCxVQUFJTSxZQUFZWCxPQUFPQyxFQUF2QjtBQUNBLFVBQUlXLFVBQVV6QyxLQUFLNkIsT0FBT0MsRUFBWixFQUFnQkksSUFBOUI7QUFDQTtBQUNBLGFBQU9sQyxLQUFLNkIsT0FBT0MsRUFBWixDQUFQO0FBQ0E7QUFDQUosY0FBUUssSUFBUixDQUFhLFNBQWIsRUFBd0JTLFNBQXhCO0FBQ0E3QixjQUFRQyxHQUFSLENBQVksdUJBQXVCNkIsT0FBbkM7QUFDRCxLQVJELE1BUU87QUFDTDlCLGNBQVFDLEdBQVIsQ0FBWSx1QkFBdUJpQixPQUFPQyxFQUExQztBQUNEO0FBQ0YsR0FiRDtBQWNELENBbkREOztBQXFEQTtBQUNBLElBQUlZLGdCQUFnQixTQUFoQkEsYUFBZ0IsR0FBTTtBQUFBO0FBRXRCL0IsWUFBUUMsR0FBUixDQUFZWixLQUFLMkMsR0FBTCxDQUFaO0FBQ0EsUUFBSUMsTUFBTSxJQUFJUixJQUFKLEdBQVdDLE9BQVgsRUFBVjtBQUNBLFFBQUlRLGNBQWNELE1BQU01QyxLQUFLMkMsR0FBTCxFQUFVUixTQUFsQztBQUNBO0FBQ0FwQixPQUFHK0IsS0FBSCxDQUFTQyxJQUFULENBQWM7QUFDWmIsWUFBTWxDLEtBQUsyQyxHQUFMLEVBQVVUO0FBREosS0FBZCxFQUVHLFVBQUNjLEdBQUQsRUFBTUMsSUFBTixFQUFlO0FBQ2hCLFVBQUlBLEtBQUtDLE1BQUwsS0FBZ0IsQ0FBcEIsRUFBdUI7QUFDckJ2QyxnQkFBUUMsR0FBUixDQUFZLGlDQUFaO0FBQ0E7QUFDQSxZQUFJdUMsU0FBUztBQUNYakIsZ0JBQU1sQyxLQUFLMkMsR0FBTCxFQUFVVCxJQURMO0FBRVhrQixvQkFBVVA7QUFGQyxTQUFiO0FBSUFRLHVCQUFlRixNQUFmO0FBQ0QsT0FSRCxNQVFPO0FBQ0wsWUFBSU4sY0FBY0ksS0FBSyxDQUFMLEVBQVFHLFFBQTFCLEVBQW9DO0FBQ2xDekMsa0JBQVFDLEdBQVIsQ0FBWSxtQ0FBWjtBQUNBMEMseUJBQWV0RCxLQUFLMkMsR0FBTCxFQUFVVCxJQUF6QixFQUErQlcsV0FBL0I7QUFDRCxTQUhELE1BR087QUFDTGxDLGtCQUFRQyxHQUFSLENBQVksc0NBQVo7QUFDRDtBQUNGO0FBQ0YsS0FuQkQ7QUFOc0I7O0FBQ3hCLE9BQUssSUFBSStCLEdBQVQsSUFBZ0IzQyxJQUFoQixFQUFzQjtBQUFBO0FBeUJyQjtBQUNGLENBM0JEOztBQTZCQSxJQUFJc0QsaUJBQWlCLFNBQWpCQSxjQUFpQixDQUFDcEIsSUFBRCxFQUFPVyxXQUFQLEVBQXVCO0FBQzFDOUIsS0FBRytCLEtBQUgsQ0FBU1MsTUFBVCxDQUFnQjtBQUNkckIsVUFBTUE7QUFEUSxHQUFoQixFQUVHO0FBQ0RzQixVQUFNO0FBQ0pKLGdCQUFVUDtBQUROO0FBREwsR0FGSCxFQU1HO0FBQUEsV0FBTWxDLFFBQVFDLEdBQVIsQ0FBZXNCLElBQWYsNEJBQXlDVyxXQUF6QyxDQUFOO0FBQUEsR0FOSDtBQU9ELENBUkQ7O0FBVUEsSUFBSVEsaUJBQWlCLFNBQWpCQSxjQUFpQixDQUFDSSxHQUFELEVBQVM7QUFDNUIxQyxLQUFHK0IsS0FBSCxDQUFTWSxJQUFULENBQWNELEdBQWQsRUFBbUIsVUFBQ1QsR0FBRCxFQUFNVyxLQUFOLEVBQWdCO0FBQ2pDLFFBQUkvQyxNQUFPb0MsT0FBTyxDQUFDVyxLQUFULEdBQ04sbUJBRE0sR0FFTkYsTUFBTSxnQkFGVjtBQUdBOUMsWUFBUUMsR0FBUixDQUFZQSxHQUFaO0FBQ0QsR0FMRDtBQU1ELENBUEQ7O0FBU0EsSUFBSWdELDBCQUEwQkMsWUFBWW5CLGFBQVosRUFBMkIsSUFBM0IsQ0FBOUIiLCJmaWxlIjoic2VydmVyMzAwMC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFwaVJvdXRlciBmcm9tICcuL2FwaSc7XG5cbi8vIGNyZWF0ZSB2YXJpYWJsZSB0byBob2xkIGFsbCB1c2VycyBhbmQgdXNlcnMnIHN0YXR1cy5cbi8vIGZvcm1hdCA6IGRvZ3NbaWRdID0ge25hbWU6IHh4eCwgdGltZTogeXl5fVxubGV0IGRvZ3MgPSB7fTtcblxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG52YXIgc2VydmVyID0gcmVxdWlyZSgnaHR0cCcpLmNyZWF0ZVNlcnZlcihhcHApLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdzZXJ2ZXIgaXMgbGlzdGVuaW5nIGF0IHBvcnQ6ICcgKyBwb3J0KTtcbn0pO1xuXG52YXIgbW9uZ29qcyA9IHJlcXVpcmUoJ21vbmdvanMnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZy5qcycpO1xudmFyIGRiID0gbW9uZ29qcyhjb25maWcudXNlcm5hbWUgKyAnOicgKyBjb25maWcucGFzc3N3b3JkICsgXCJAZHMwNDMzNTAubWxhYi5jb206NDMzNTAvdGVzdGRhdGEwMVwiKTtcblxuYXBwLnNldCgndmlldyBlbmdpbmUnLCAnZWpzJyk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSk7XG5hcHAudXNlKCcvYXBpJywgYXBpUm91dGVyKTtcblxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMucmVuZGVyKCdpbmRleC5lanMnKTtcbn0pO1xuXG5sZXQgaW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKS5saXN0ZW4oc2VydmVyKTtcblxudmFyIG91dHB1dHMgPSBpby5vZignLycpO1xuXG5vdXRwdXRzLm9uKCdjb25uZWN0aW9uJywgKHNvY2tldCkgPT4ge1xuICBjb25zb2xlLmxvZygnbmV3IG91dHB1dCBjbGllbnQgY29ubmVjdGVkOiAnICsgc29ja2V0LmlkKTtcblxuICBzb2NrZXQub24oJ2Fza2luZ0RhdGEnLCAoKSA9PiB7XG4gICAgb3V0cHV0cy5lbWl0KCdpbml0aWFsRGF0YScsIGRvZ3MpO1xuICAgIGNvbnNvbGUubG9nKCdqdXN0IGdhdmUgYWxsIGRvZ3MgdG8gYSBuZXcgb3V0cHV0IGNsaWVudCcpO1xuICB9KVxuXG4gIHNvY2tldC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnb3V0cHV0IGNsaWVudCBpcyBnb25lOiAnICsgc29ja2V0LmlkKTtcbiAgfSk7XG59KTtcblxudmFyIGlucHV0cyA9IGlvLm9mKCcvaW5wdXQnKTtcblxuLy93aGF0IGRvIGlucHV0cyBkb1xuaW5wdXRzLm9uKCdjb25uZWN0aW9uJywgKHNvY2tldCkgPT4ge1xuICBjb25zb2xlLmxvZygnbmV3IGlucHV0IGNsaWVudCBjb25uZWN0ZWQ6ICcgKyBzb2NrZXQuaWQpO1xuXG4gIC8vd2hlbiB3ZSBoYXZlIHVzZXJOYW1lLCBzdG9yZSBpdCBhcyBhIHVzZXIuXG4gIC8vKioqKmNvdWxkIGJlIGRvbmUgd2l0aCBpbnB1dCBmb3JtIGFuZCByb3V0ZSxcbiAgLy91cGRhdGU6IHNlZSB0aGUgYm90dG9tIG9mIGZpbGUgdG8gc2VlIG15IGF0dGVtcHRpb25cbiAgc29ja2V0Lm9uKCduZXdVc2VyJywgKG15TmFtZSkgPT4ge1xuICAgIGRvZ3Nbc29ja2V0LmlkXSA9IHtcbiAgICAgIG5hbWU6IG15TmFtZSxcbiAgICAgIHRpbWVTdGFydDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICB9XG4gICAgLy8gY3JlYXRlIG5ldyB2YXJpYWJsZSB0byBob2xkIG5ldyBkb2csIHNvIHdlIGNhbiBvbmx5IHNlbnQgbmV3IGRvZyB0byBvdGhlcnMuXG4gICAgbGV0IG5ld0RvZyA9IHtcbiAgICAgIGlkOiBzb2NrZXQuaWQsXG4gICAgICBuYW1lOiBkb2dzW3NvY2tldC5pZF0ubmFtZSxcbiAgICAgIHRpbWVTdGFydDogZG9nc1tzb2NrZXQuaWRdLnRpbWVTdGFydFxuICAgIH1cbiAgICAvL3NlbmQgbmV3IGRvZyBtZXNzYWdlIHRvIGFsbCBjbGllbnRzXG4gICAgb3V0cHV0cy5lbWl0KCduZXdEb2cnLCBuZXdEb2cpO1xuICAgIGNvbnNvbGUubG9nKCdnaXZpbmcgdGhlIG5ldyBkb2cgdG8gYWxsIG91dHB1dHMsIGxpbmUgNTgnKTtcbiAgfSk7XG5cbiAgLy93aGVuIHdlIGdvdCBhIG5ldyB1c2VyU3RhcnRUaW1lKG1lYW5zIGEgdXNlciBtb3ZlZCBoaXMgcGhvbmUpLFxuICAvL3N0b3JlIGl0IHRvIHRoZSBjb3JyZXNwb25kaW5nIHVzZXJJRFxuICBzb2NrZXQub24oJ3plbkludGVydXB0ZWQnLCAoKSA9PiB7XG4gICAgLy9pZiB1c2VyIGRvZXMndCBoYXZlIGEgbmFtZSwgc2tpcCB0aGlzLlxuICAgIGlmIChkb2dzW3NvY2tldC5pZF0gIT0gbnVsbCAmJiBkb2dzW3NvY2tldC5pZF0ubmFtZSAhPSBudWxsKSB7XG4gICAgICAvLyByZWZyZXNoIGRvZ3MsIGFuZCBlbWl0IG5ldyBkYXRhIHRvIGFsbFxuICAgICAgZG9nc1tzb2NrZXQuaWRdLnRpbWVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgbGV0IGZhaWxlZERvZ0lkID0gc29ja2V0LmlkO1xuICAgICAgLy8gdGVsbCBvdXRwdXMgd2hvIGp1c3QgZmFpbGQsIGZvciBhbmltYXRpb24gcHVycG9zZS5cbiAgICAgIG91dHB1dHMuZW1pdCgnZG9nRmFpbCcsIGZhaWxlZERvZ0lkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyJyArIGRvZ3Nbc29ja2V0LmlkXS5uYW1lICsgJ2p1c3QgZmFpbGVkJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyB3aGVuIHVzZXIgbGVhdmVcbiAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgIC8vaWYgdXNlciBkb2VzJ3QgaGF2ZSBhIG5hbWUsIHNraXAgdGhpcy5cbiAgICBpZiAoZG9nc1tzb2NrZXQuaWRdICE9IG51bGwgJiYgZG9nc1tzb2NrZXQuaWRdLm5hbWUgIT0gbnVsbCkge1xuICAgICAgbGV0IGdvbmVEb2dJZCA9IHNvY2tldC5pZDtcbiAgICAgIGxldCBkb2dOYW1lID0gZG9nc1tzb2NrZXQuaWRdLm5hbWU7XG4gICAgICAvL2RlbGV0ZSB0aGlzIGRvZ1xuICAgICAgZGVsZXRlIGRvZ3Nbc29ja2V0LmlkXTtcbiAgICAgIC8vdGVsbCBvdXRwdXRzIHdobyBqdXN0IGxlZnRcbiAgICAgIG91dHB1dHMuZW1pdCgnZG9nTGVmdCcsIGdvbmVEb2dJZCk7XG4gICAgICBjb25zb2xlLmxvZygndGhpcyBndXkgaGFzIGxlZnQ6JyArIGRvZ05hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygndGhpcyBndXkgaGFzIGxlZnQ6JyArIHNvY2tldC5pZCk7XG4gICAgfVxuICB9KVxufSk7XG5cbi8vY29tcGFyZVxudmFyIFN0b3JlRG9nc1RvREIgPSAoKSA9PiB7XG4gIGZvciAodmFyIGRvZyBpbiBkb2dzKSB7XG4gICAgY29uc29sZS5sb2coZG9nc1tkb2ddKTtcbiAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgbGV0IG5ld0R1cmF0aW9uID0gbm93IC0gZG9nc1tkb2ddLnRpbWVTdGFydDtcbiAgICAvLyBmaW5kIHRoZSBzYW1lIGRvZyBpbiBkYXRhYmFzZVxuICAgIGRiLnRvcDEwLmZpbmQoe1xuICAgICAgbmFtZTogZG9nc1tkb2ddLm5hbWVcbiAgICB9LCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2RvZyBkaWRuXFwndCBmaW5kLCBtYXliZSBuZXcgZG9nJyk7XG4gICAgICAgIC8vIHN0b3JlIG5ldyBkb2dzXG4gICAgICAgIGxldCBuZXd0b3AgPSB7XG4gICAgICAgICAgbmFtZTogZG9nc1tkb2ddLm5hbWUsXG4gICAgICAgICAgZHVyYXRpb246IG5ld0R1cmF0aW9uXG4gICAgICAgIH07XG4gICAgICAgIFN0b3JlTmV3VG9wRG9nKG5ld3RvcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmV3RHVyYXRpb24gPiBkYXRhWzBdLmR1cmF0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2ZpbmQgdGhpcyBkb2csIGFuZCB3b3J0aCB1cGRhdGluZycpO1xuICAgICAgICAgIHVwZGF0ZUR1cmF0aW9uKGRvZ3NbZG9nXS5uYW1lLCBuZXdEdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ25vdCBsb25nZXIgdGhhbiBsYXN0IHRpbWUsIGFiYW5kb25lZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG52YXIgdXBkYXRlRHVyYXRpb24gPSAobmFtZSwgbmV3RHVyYXRpb24pID0+IHtcbiAgZGIudG9wMTAudXBkYXRlKHtcbiAgICBuYW1lOiBuYW1lXG4gIH0sIHtcbiAgICAkc2V0OiB7XG4gICAgICBkdXJhdGlvbjogbmV3RHVyYXRpb25cbiAgICB9XG4gIH0sICgpID0+IGNvbnNvbGUubG9nKGAke25hbWV9J3MgbmV3IGR1cmF0aW9uIGlzICR7bmV3RHVyYXRpb259YCkpXG59XG5cbnZhciBTdG9yZU5ld1RvcERvZyA9IChvYmopID0+IHtcbiAgZGIudG9wMTAuc2F2ZShvYmosIChlcnIsIHNhdmVkKSA9PiB7XG4gICAgbGV0IGxvZyA9IChlcnIgfHwgIXNhdmVkKVxuICAgICAgPyAnZGF0ZSBkaWRuXFwndCBzYXZlJ1xuICAgICAgOiBvYmogKyAnc2F2ZWQgdG8gdG9wMTAnO1xuICAgIGNvbnNvbGUubG9nKGxvZyk7XG4gIH0pXG59XG5cbnZhciBzdG9yZURvZ3NFdmVyeTEwU2Vjb25kcyA9IHNldEludGVydmFsKFN0b3JlRG9nc1RvREIsIDUwMDApO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "server3000.js"
      ],
      "names": [
        "dogs",
        "port",
        "process",
        "env",
        "PORT",
        "express",
        "require",
        "app",
        "server",
        "createServer",
        "listen",
        "console",
        "log",
        "mongojs",
        "config",
        "db",
        "username",
        "passsword",
        "set",
        "use",
        "static",
        "get",
        "req",
        "res",
        "render",
        "io",
        "outputs",
        "of",
        "on",
        "socket",
        "id",
        "emit",
        "inputs",
        "myName",
        "name",
        "timeStart",
        "Date",
        "getTime",
        "newDog",
        "failedDogId",
        "goneDogId",
        "dogName",
        "StoreDogsToDB",
        "dog",
        "now",
        "newDuration",
        "top10",
        "find",
        "err",
        "data",
        "length",
        "newtop",
        "duration",
        "StoreNewTopDog",
        "updateDuration",
        "update",
        "$set",
        "obj",
        "save",
        "saved",
        "storeDogsEvery10Seconds",
        "setInterval"
      ],
      "mappings": "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",
      "file": "server3000.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "import apiRouter from './api';\n\n// create variable to hold all users and users' status.\n// format : dogs[id] = {name: xxx, time: yyy}\nlet dogs = {};\n\nconst port = process.env.PORT || 3000;\nconst express = require('express');\nconst app = express();\nvar server = require('http').createServer(app).listen(port, () => {\n  console.log('server is listening at port: ' + port);\n});\n\nvar mongojs = require('mongojs');\nvar config = require('./config.js');\nvar db = mongojs(config.username + ':' + config.passsword + \"@ds043350.mlab.com:43350/testdata01\");\n\napp.set('view engine', 'ejs');\napp.use(express.static('public'));\napp.use('/api', apiRouter);\n\napp.get('/', (req, res) => {\n  res.render('index.ejs');\n});\n\nlet io = require('socket.io').listen(server);\n\nvar outputs = io.of('/');\n\noutputs.on('connection', (socket) => {\n  console.log('new output client connected: ' + socket.id);\n\n  socket.on('askingData', () => {\n    outputs.emit('initialData', dogs);\n    console.log('just gave all dogs to a new output client');\n  })\n\n  socket.on('disconnect', () => {\n    console.log('output client is gone: ' + socket.id);\n  });\n});\n\nvar inputs = io.of('/input');\n\n//what do inputs do\ninputs.on('connection', (socket) => {\n  console.log('new input client connected: ' + socket.id);\n\n  //when we have userName, store it as a user.\n  //****could be done with input form and route,\n  //update: see the bottom of file to see my attemption\n  socket.on('newUser', (myName) => {\n    dogs[socket.id] = {\n      name: myName,\n      timeStart: new Date().getTime()\n    }\n    // create new variable to hold new dog, so we can only sent new dog to others.\n    let newDog = {\n      id: socket.id,\n      name: dogs[socket.id].name,\n      timeStart: dogs[socket.id].timeStart\n    }\n    //send new dog message to all clients\n    outputs.emit('newDog', newDog);\n    console.log('giving the new dog to all outputs, line 58');\n  });\n\n  //when we got a new userStartTime(means a user moved his phone),\n  //store it to the corresponding userID\n  socket.on('zenInterupted', () => {\n    //if user does't have a name, skip this.\n    if (dogs[socket.id] != null && dogs[socket.id].name != null) {\n      // refresh dogs, and emit new data to all\n      dogs[socket.id].timeStart = new Date().getTime();\n      let failedDogId = socket.id;\n      // tell outpus who just faild, for animation purpose.\n      outputs.emit('dogFail', failedDogId);\n      console.log('User' + dogs[socket.id].name + 'just failed');\n    }\n  });\n\n  // when user leave\n  socket.on('disconnect', () => {\n    //if user does't have a name, skip this.\n    if (dogs[socket.id] != null && dogs[socket.id].name != null) {\n      let goneDogId = socket.id;\n      let dogName = dogs[socket.id].name;\n      //delete this dog\n      delete dogs[socket.id];\n      //tell outputs who just left\n      outputs.emit('dogLeft', goneDogId);\n      console.log('this guy has left:' + dogName);\n    } else {\n      console.log('this guy has left:' + socket.id);\n    }\n  })\n});\n\n//compare\nvar StoreDogsToDB = () => {\n  for (var dog in dogs) {\n    console.log(dogs[dog]);\n    let now = new Date().getTime();\n    let newDuration = now - dogs[dog].timeStart;\n    // find the same dog in database\n    db.top10.find({\n      name: dogs[dog].name\n    }, (err, data) => {\n      if (data.length === 0) {\n        console.log('dog didn\\'t find, maybe new dog');\n        // store new dogs\n        let newtop = {\n          name: dogs[dog].name,\n          duration: newDuration\n        };\n        StoreNewTopDog(newtop);\n      } else {\n        if (newDuration > data[0].duration) {\n          console.log('find this dog, and worth updating');\n          updateDuration(dogs[dog].name, newDuration);\n        } else {\n          console.log('not longer than last time, abandoned');\n        }\n      }\n    })\n  }\n}\n\nvar updateDuration = (name, newDuration) => {\n  db.top10.update({\n    name: name\n  }, {\n    $set: {\n      duration: newDuration\n    }\n  }, () => console.log(`${name}'s new duration is ${newDuration}`))\n}\n\nvar StoreNewTopDog = (obj) => {\n  db.top10.save(obj, (err, saved) => {\n    let log = (err || !saved)\n      ? 'date didn\\'t save'\n      : obj + 'saved to top10';\n    console.log(log);\n  })\n}\n\nvar storeDogsEvery10Seconds = setInterval(StoreDogsToDB, 5000);\n"
      ]
    },
    "mtime": 1519274434588
  },
  "{\"filename\":\"/app/api/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/api\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "../config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/api/index.js",
      "filenameRelative": "/app/api/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/app/api",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/api",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mongojs = require('mongojs');\nvar db = mongojs(_config2.default.username + ':' + _config2.default.passsword + \"@ds043350.mlab.com:43350/testdata01\");\nvar router = _express2.default.Router();\n\nrouter.get('/top10', function (req, res) {\n  db.top10.find({}, function (err, data) {\n    if (err || !data) {\n      console.log('date didn\\'t find');\n    } else {\n      res.send(data);\n    };\n  });\n});\n\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm1vbmdvanMiLCJyZXF1aXJlIiwiZGIiLCJ1c2VybmFtZSIsInBhc3Nzd29yZCIsInJvdXRlciIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInRvcDEwIiwiZmluZCIsImVyciIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwic2VuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsVUFBVUMsUUFBUSxTQUFSLENBQWhCO0FBQ0EsSUFBTUMsS0FBS0YsUUFBUSxpQkFBT0csUUFBUCxHQUFrQixHQUFsQixHQUF3QixpQkFBT0MsU0FBL0IsR0FBMkMscUNBQW5ELENBQVg7QUFDQSxJQUFNQyxTQUFTLGtCQUFRQyxNQUFSLEVBQWY7O0FBRUFELE9BQU9FLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUNyQjtBQUNFUCxLQUFHUSxLQUFILENBQVNDLElBQVQsQ0FBYyxFQUFkLEVBQWtCLFVBQUNDLEdBQUQsRUFBTUMsSUFBTixFQUFlO0FBQy9CLFFBQUlELE9BQU8sQ0FBQ0MsSUFBWixFQUFrQjtBQUNoQkMsY0FBUUMsR0FBUixDQUFZLG1CQUFaO0FBQ0QsS0FGRCxNQUVPO0FBQ0xOLFVBQUlPLElBQUosQ0FBU0gsSUFBVDtBQUNEO0FBQ0YsR0FORDtBQU9ELENBVEQ7O2tCQVdlUixNIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9hcHAvYXBpIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5cbmNvbnN0IG1vbmdvanMgPSByZXF1aXJlKCdtb25nb2pzJyk7XG5jb25zdCBkYiA9IG1vbmdvanMoY29uZmlnLnVzZXJuYW1lICsgJzonICsgY29uZmlnLnBhc3Nzd29yZCArIFwiQGRzMDQzMzUwLm1sYWIuY29tOjQzMzUwL3Rlc3RkYXRhMDFcIik7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIuZ2V0KCcvdG9wMTAnLCAocmVxLCByZXMpID0+XG57XG4gIGRiLnRvcDEwLmZpbmQoe30sIChlcnIsIGRhdGEpID0+IHtcbiAgICBpZiAoZXJyIHx8ICFkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZygnZGF0ZSBkaWRuXFwndCBmaW5kJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zZW5kKGRhdGEpO1xuICAgIH07XG4gIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "mongojs",
        "require",
        "db",
        "username",
        "passsword",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "top10",
        "find",
        "err",
        "data",
        "console",
        "log",
        "send"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,KAAKF,QAAQ,iBAAOG,QAAP,GAAkB,GAAlB,GAAwB,iBAAOC,SAA/B,GAA2C,qCAAnD,CAAX;AACA,IAAMC,SAAS,kBAAQC,MAAR,EAAf;;AAEAD,OAAOE,GAAP,CAAW,QAAX,EAAqB,UAACC,GAAD,EAAMC,GAAN,EACrB;AACEP,KAAGQ,KAAH,CAASC,IAAT,CAAc,EAAd,EAAkB,UAACC,GAAD,EAAMC,IAAN,EAAe;AAC/B,QAAID,OAAO,CAACC,IAAZ,EAAkB;AAChBC,cAAQC,GAAR,CAAY,mBAAZ;AACD,KAFD,MAEO;AACLN,UAAIO,IAAJ,CAASH,IAAT;AACD;AACF,GAND;AAOD,CATD;;kBAWeR,M",
      "file": "index.js",
      "sourceRoot": "/app/api",
      "sourcesContent": [
        "import express from 'express';\nimport config from '../config';\n\nconst mongojs = require('mongojs');\nconst db = mongojs(config.username + ':' + config.passsword + \"@ds043350.mlab.com:43350/testdata01\");\nconst router = express.Router();\n\nrouter.get('/top10', (req, res) =>\n{\n  db.top10.find({}, (err, data) => {\n    if (err || !data) {\n      console.log('date didn\\'t find');\n    } else {\n      res.send(data);\n    };\n  });\n});\n\nexport default router;\n"
      ]
    },
    "mtime": 1519272334439
  },
  "{\"filename\":\"/app/config.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/config.js",
      "filenameRelative": "/app/config.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "config.js",
      "sourceFileName": "config.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "config"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nvar config = {\n  username: \"yy2473\",\n  passsword: '111111'\n};\n\nmodule.exports = config;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJuYW1lcyI6WyJjb25maWciLCJ1c2VybmFtZSIsInBhc3Nzd29yZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsU0FBUztBQUNYQyxZQUFVLFFBREM7QUFFWEMsYUFBVTtBQUZDLENBQWI7O0FBS0FDLE9BQU9DLE9BQVAsR0FBaUJKLE1BQWpCIiwiZmlsZSI6ImNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNvbmZpZyA9IHtcbiAgdXNlcm5hbWU6IFwieXkyNDczXCIsXG4gIHBhc3Nzd29yZDonMTExMTExJyxcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb25maWc7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "config.js"
      ],
      "names": [
        "config",
        "username",
        "passsword",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,IAAIA,SAAS;AACXC,YAAU,QADC;AAEXC,aAAU;AAFC,CAAb;;AAKAC,OAAOC,OAAP,GAAiBJ,MAAjB",
      "file": "config.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "var config = {\n  username: \"yy2473\",\n  passsword:'111111',\n}\n\nmodule.exports = config;\n"
      ]
    },
    "mtime": 1519270771000
  }
}